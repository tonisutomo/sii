PrimeFaces.widget.OrderList=PrimeFaces.widget.BaseWidget.extend({init:function(a){this._super(a);this.list=this.jq.find(".ui-orderlist-list"),this.items=this.list.children(".ui-orderlist-item");this.input=$(this.jqId+"_values");this.cfg.effect=this.cfg.effect||"fade";this.cfg.disabled=this.jq.hasClass("ui-state-disabled");var b=this;if(!this.cfg.disabled){this.generateItems();this.setupButtons();this.bindEvents();this.list.sortable({revert:1,start:function(c,d){PrimeFaces.clearSelection()},update:function(c,d){b.onDragDrop(c,d)}})}},generateItems:function(){var a=this;this.list.children(".ui-orderlist-item").each(function(){var b=$(this),c=b.data("item-value");a.input.append('<option value="'+c+'" selected="selected">'+c+"</option>")})},bindEvents:function(){var a=this;this.items.on("mouseover.orderList",function(c){var b=$(this);if(!b.hasClass("ui-state-highlight")){$(this).addClass("ui-state-hover")}}).on("mouseout.orderList",function(c){var b=$(this);if(!b.hasClass("ui-state-highlight")){$(this).removeClass("ui-state-hover")}}).on("mousedown.orderList",function(c){var b=$(this),d=(c.metaKey||c.ctrlKey);if(!d){b.removeClass("ui-state-hover").addClass("ui-state-highlight").siblings(".ui-state-highlight").removeClass("ui-state-highlight");a.fireItemSelectEvent(b)}else{if(b.hasClass("ui-state-highlight")){b.removeClass("ui-state-highlight");a.fireItemUnselectEvent(b)}else{b.removeClass("ui-state-hover").addClass("ui-state-highlight");a.fireItemSelectEvent(b)}}})},setupButtons:function(){var a=this;PrimeFaces.skinButton(this.jq.find(".ui-button"));this.jq.find(" .ui-orderlist-controls .ui-orderlist-button-move-up").click(function(){a.moveUp(a.sourceList)});this.jq.find(" .ui-orderlist-controls .ui-orderlist-button-move-top").click(function(){a.moveTop(a.sourceList)});this.jq.find(" .ui-orderlist-controls .ui-orderlist-button-move-down").click(function(){a.moveDown(a.sourceList)});this.jq.find(" .ui-orderlist-controls .ui-orderlist-button-move-bottom").click(function(){a.moveBottom(a.sourceList)})},onDragDrop:function(a,b){b.item.removeClass("ui-state-highlight");this.saveState();this.fireReorderEvent()},saveState:function(){this.input.children().remove();this.generateItems()},moveUp:function(){var a=this;this.items.filter(".ui-state-highlight").each(function(){var b=$(this);if(!b.is(":first-child")){b.hide(a.cfg.effect,{},"fast",function(){b.insertBefore(b.prev()).show(a.cfg.effect,{},"fast",function(){a.saveState();a.fireReorderEvent()})})}})},moveTop:function(){var a=this;this.items.filter(".ui-state-highlight").each(function(){var b=$(this);if(!b.is(":first-child")){b.hide(a.cfg.effect,{},"fast",function(){b.prependTo(b.parent()).show(a.cfg.effect,{},"fast",function(){a.saveState();a.fireReorderEvent()})})}})},moveDown:function(){var a=this;$(this.items.filter(".ui-state-highlight").get().reverse()).each(function(){var b=$(this);if(!b.is(":last-child")){b.hide(a.cfg.effect,{},"fast",function(){b.insertAfter(b.next()).show(a.cfg.effect,{},"fast",function(){a.saveState();a.fireReorderEvent()})})}})},moveBottom:function(){var a=this;this.items.filter(".ui-state-highlight").each(function(){var b=$(this);if(!b.is(":last-child")){b.hide(a.cfg.effect,{},"fast",function(){b.appendTo(b.parent()).show(a.cfg.effect,{},"fast",function(){a.saveState();a.fireReorderEvent()})})}})},hasBehavior:function(a){if(this.cfg.behaviors){return this.cfg.behaviors[a]!=undefined}return false},fireItemSelectEvent:function(b){if(this.hasBehavior("select")){var c=this.cfg.behaviors.select,a={params:[{name:this.id+"_itemIndex",value:b.index()}]};c.call(this,a)}},fireItemUnselectEvent:function(c){if(this.hasBehavior("unselect")){var a=this.cfg.behaviors.unselect,b={params:[{name:this.id+"_itemIndex",value:c.index()}]};a.call(this,b)}},fireReorderEvent:function(){if(this.hasBehavior("reorder")){this.cfg.behaviors.reorder.call(this)}}});